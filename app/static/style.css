:root{
  --bg-overlay: rgba(10,30,20,0.65);
  --card-bg: rgba(14,24,16,0.9);
  --accent: #00ff66;
  --muted: #98ffb3;
  --danger: #ff3b3b;
  --container-max: 1100px;
  --radius: 14px;
  --gap: 1rem;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Fira Sans', 'Fira Mono', monospace;
  color:var(--accent);
  background: url('/static/bg-green-boken.gif') no-repeat center center fixed;
  background-size: cover;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
body::before{content:'';position:fixed;inset:0;background:var(--bg-overlay);z-index:0;pointer-events:none}

.navbar{position:sticky;top:0;z-index:50;display:flex;align-items:center;gap:var(--gap);justify-content:center;padding:.8rem 1rem;background:linear-gradient(90deg, rgba(10,30,10,0.6), rgba(18,45,18,0.55));backdrop-filter:blur(6px);border-bottom:1px solid rgba(0,255,0,0.06)}
.navbar a{color:var(--muted);text-decoration:none;padding:.55rem .9rem;border-radius:10px;font-weight:600;transition:all .15s ease}
.navbar a:hover,.navbar a.active{background:rgba(0,255,102,0.08);color:var(--accent);box-shadow:0 6px 18px rgba(0,255,102,0.06)}

.container{position:relative;z-index:1;max-width:var(--container-max);margin:1.1rem auto;padding:1.2rem;border-radius:calc(var(--radius) + 6px);background:linear-gradient(180deg, rgba(20,40,20,0.9), rgba(8,16,8,0.85));box-shadow:0 8px 30px rgba(0,0,0,0.6)}
h1{margin:0 0 0.9rem 0;font-size:1.9rem;letter-spacing:1.5px}

/* Form spacing improvements */
form{display:block;gap:0.6rem;row-gap:0.8rem}
form > label{margin-top:0.8rem}
button, .qr-controls button{background:var(--accent);color:#06120a;border:none;padding:.6rem 1rem;border-radius:10px;font-weight:700;cursor:pointer}
button{margin-top:0.6rem}

form{display:block}
label{display:block;margin:.6rem 0 .25rem 0;font-weight:700;color:var(--muted)}
input[type=text],input[type=color],input[type=file],select{width:100%;padding:.65rem;border-radius:10px;border:none;background:#0b0b0b;color:var(--muted);font-size:1rem}
button, .qr-controls button{background:var(--accent);color:#06120a;border:none;padding:.6rem 1rem;border-radius:10px;font-weight:700;cursor:pointer}
button:hover{filter:brightness(.95)}

#qr-result{margin-top:1.5rem;display:flex;flex-direction:column;align-items:center;gap:1rem}

.multi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-top:1rem}
.qr-card{background:var(--card-bg);padding:1rem;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.6);display:flex;flex-direction:column;align-items:center;gap:.6rem;width:100%;max-width:520px}
.qr-card img{width:auto;max-width:240px;max-height:240px;border-radius:8px;background:#fff;padding:.25rem}
.qr-label{font-weight:800;color:var(--muted)}
.qr-decoded pre{background:#080a08;color:#9fffaa;padding:.6rem;border-radius:8px;overflow:auto}

.qr-controls{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;align-items:center}
.qr-controls button, .qr-controls .file-btn{min-width:88px}

@media (max-width:420px){
  .qr-controls{flex-direction:column;align-items:stretch}
  .qr-controls button{width:100%;min-width:0}
}
.trust-score{display:flex;flex-direction:column;align-items:center;gap:.25rem}
.trust-score ul{margin:.25rem 0 0 1rem;padding:0;color:var(--muted)}
.warning{color:var(--danger);font-weight:800}

/* Utilities and responsiveness */
.row{display:flex;gap:1rem;flex-wrap:wrap}
.col{flex:1}

@media (max-width:900px){
  .container{margin:1rem;padding:1rem}
  h1{font-size:1.4rem}
}
@media (max-width:640px){
  .navbar{padding:.6rem}
  .navbar a{padding:.45rem .6rem;font-size:.95rem}
  .multi-grid{grid-template-columns:1fr}
}

/* Tighter mobile adjustments for generated QR cards */
@media (max-width:480px){
  .container{margin:0.6rem;padding:0.9rem}
  .qr-card{padding:0.8rem;gap:0.5rem}
  .qr-card img{max-width:180px;max-height:180px}
  .qr-decoded pre{font-size:0.9rem}
  .trust-details-pre{font-size:0.85rem}
}

/* small visual improvements */
pre{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Fira Mono', monospace;font-size:.95rem}

/* Page wrapper to offset fixed navbar */
.page-wrapper{display:flex;justify-content:center;align-items:flex-start;padding-top:clamp(12px,4vh,48px);padding-bottom:clamp(12px,3vh,40px)}

/* Improved buttons and interactive elements */
.btn {display:inline-flex;align-items:center;gap:.5rem;padding:.6rem 0.9rem;border-radius:10px;border:none;background:linear-gradient(180deg,var(--accent),var(--accent-strong));color:#071;cursor:pointer;font-weight:800;box-shadow:0 8px 24px rgba(0,255,102,0.06);transition:transform .12s ease,box-shadow .12s ease}
.btn.secondary{background:transparent;color:var(--accent);border:1px solid rgba(255,255,255,0.04);box-shadow:none}
.btn.ghost{background:transparent;border:1px dashed rgba(255,255,255,0.04);color:var(--muted)}
.btn:active{transform:translateY(1px)}

/* Camera / scanner UI */
.video-wrapper{position:relative;width:100%;max-width:520px;display:flex;justify-content:center;overflow:hidden}
#video{width:100%;height:auto;border-radius:12px;background:#000;display:block}
.scanner-overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}

/* Unique animated scan frame with gradient sweep and animated corners */
.scan-frame{width:78%;max-width:420px;height:48%;border-radius:18px;border:2.5px solid rgba(0,255,120,0.18);box-shadow:0 8px 30px rgba(0,0,0,0.6);background:linear-gradient(135deg, rgba(0,255,120,0.08) 0%, rgba(0,255,120,0.02) 100%);position:relative;overflow:visible;transition:box-shadow .22s cubic-bezier(.2,.9,.3,1)}
.scan-frame::after{content:'';position:absolute;inset:0;border-radius:inherit;pointer-events:none;background:linear-gradient(90deg,rgba(0,255,120,0.08) 0%,rgba(0,255,120,0.18) 50%,rgba(0,255,120,0.08) 100%);opacity:0.7;mix-blend-mode:screen;animation:scanSweep 2.2s linear infinite}
@keyframes scanSweep{0%{opacity:0.7;transform:translateX(-30%)}50%{opacity:1;transform:translateX(30%)}100%{opacity:0.7;transform:translateX(-30%)}}
.scan-frame .corner{position:absolute;width:28px;height:28px;border:3px solid rgba(0,255,150,0.85);border-radius:8px;box-shadow:0 8px 24px rgba(0,255,120,0.09);opacity:0.0;transform:scale(0.8);transition:all .22s cubic-bezier(.2,.9,.3,1)}
.scan-frame .corner.tl{left:-10px;top:-10px;border-right:none;border-bottom:none}
.scan-frame .corner.tr{right:-10px;top:-10px;border-left:none;border-bottom:none}
.scan-frame .corner.bl{left:-10px;bottom:-10px;border-right:none;border-top:none}
.scan-frame .corner.br{right:-10px;bottom:-10px;border-left:none;border-top:none}
.scanner-overlay.detected .corner{opacity:1;transform:scale(1.08);box-shadow:0 0 18px 2px rgba(0,255,120,0.18)}
.scanner-overlay.detected .scan-frame{box-shadow:0 0 0 6px rgba(0,255,120,0.13),0 8px 30px rgba(0,0,0,0.6)}

/* Animated scan bar with glow and sweep */
.scan-bar{position:absolute;left:8%;right:8%;height:5px;top:50%;margin-top:-2.5px;border-radius:999px;background:linear-gradient(90deg, transparent, #00ff99 60%, transparent);box-shadow:0 0 18px 2px #00ff99;opacity:0.85;animation:scanBarMove 1.6s cubic-bezier(.2,.9,.3,1) infinite;will-change:transform,top}
@keyframes scanBarMove{0%{top:18%}50%{top:82%}100%{top:18%}}
.scanner-overlay.detected .scan-bar{background:linear-gradient(90deg, transparent, #00ff99 80%, transparent);box-shadow:0 0 28px 6px #00ff99;opacity:1;animation:none;top:50%;}

/* Pulse/progress when detected */
.scanner-overlay .pulse{position:absolute;width:44px;height:44px;left:50%;top:50%;transform:translate(-50%,-50%) scale(0.7);border-radius:999px;background:radial-gradient(circle at center, rgba(0,255,120,0.22), rgba(0,255,120,0.08));opacity:0;transition:all .22s cubic-bezier(.2,.9,.3,1);will-change:transform,opacity}
.scanner-overlay.detected .pulse{opacity:1;transform:translate(-50%,-50%) scale(1.2);box-shadow:0 12px 40px rgba(0,255,120,0.18);transition:all .45s cubic-bezier(.2,.9,.3,1)}

/* Progress ring */
.progress-ring{position:absolute;width:56px;height:56px;left:50%;top:50%;transform:translate(-50%,-50%);border-radius:50%;display:flex;align-items:center;justify-content:center;pointer-events:none}
.progress-ring svg{transform:rotate(-90deg)}
.progress-ring circle{fill:none;stroke:rgba(0,255,120,0.18);stroke-width:4}
.progress-ring .progress{stroke:#00ff99;stroke-linecap:round;stroke-width:4;transition:stroke-dashoffset .35s linear}

/* subtle moving scan bar without blur */
.scan-line{position:absolute;left:0;right:0;height:4px;margin:auto;width:90%;max-width:380px;border-radius:999px;background:linear-gradient(90deg, transparent, rgba(0,255,120,0.95), transparent);box-shadow:0 6px 18px rgba(0,255,120,0.08);opacity:0.85;animation:scanY 1.8s linear infinite}
@keyframes scanY{0%{transform:translateY(-40%)}50%{transform:translateY(40%)}100%{transform:translateY(-40%)}}

/* pulse/progress when detected */
.scanner-overlay .pulse{position:absolute;width:40px;height:40px;border-radius:999px;background:radial-gradient(circle at center, rgba(0,255,120,0.28), rgba(0,255,120,0.08));opacity:0;transform:scale(0.6);transition:all .22s ease}
.scanner-overlay.detected .pulse{opacity:1;transform:scale(1.8);box-shadow:0 12px 40px rgba(0,255,120,0.12);transition:all .45s cubic-bezier(.2,.9,.3,1)}
.scanner-overlay.detected .corner{opacity:1;transform:scale(1)}

/* tiny circular progress ring */
.progress-ring{position:absolute;width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;pointer-events:none}
.progress-ring svg{transform:rotate(-90deg)}
.progress-ring circle{fill:none;stroke:rgba(0,255,120,0.18);stroke-width:4}
.progress-ring .progress{stroke:rgba(0,255,120,0.95);stroke-linecap:round;stroke-width:4;transition:stroke-dashoffset .35s linear}

@media (max-width:640px){
  .scan-frame{width:88%;height:46%}
  .scan-line{width:88%}
}

@media (max-width:420px){
  .scan-frame .corner{width:22px;height:22px;border-width:2.5px}
  .scan-frame .corner.tl{left:-8px;top:-8px}
  .scan-frame .corner.tr{right:-8px;top:-8px}
  .scan-frame .corner.bl{left:-8px;bottom:-8px}
  .scan-frame .corner.br{right:-8px;bottom:-8px}
}
@keyframes scan{0%{transform:translateY(-22%)}50%{transform:translateY(22%)}100%{transform:translateY(-22%)}}

.camera-controls{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center;margin-top:.8rem}
.status-bubble{padding:.4rem .6rem;border-radius:999px;background:rgba(0,0,0,0.28);color:var(--muted);font-weight:700;font-size:.95rem}

/* Result panel */
.scan-result{margin-top:1rem;display:flex;flex-direction:column;align-items:center;gap:.6rem}
.scan-result .result-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));padding:0.8rem;border-radius:10px;min-width:240px;max-width:520px;box-shadow:0 8px 24px rgba(0,0,0,0.45)}

/* subtle hover for cards */
.qr-card:hover,.container:hover{transform:translateY(-3px);transition:transform .15s ease}

@media (max-width:640px){
  .page-wrapper{padding-top:78px;padding-bottom:80px}
  .container{margin:0.6rem;padding:1rem}
  .scan-frame{width:88%;height:42%}
  .scan-line{width:88%}
}

/* Utility classes migrated from inline styles */
.qr-image{max-width:250px;background:#fff;border-radius:12px;box-shadow:0 0 10px rgba(0,255,0,0.7);padding:6px}
.trust-icon{font-size:2rem}
.collapse-btn{margin-top:0.5rem;background:transparent;border:none;color:var(--muted);cursor:pointer;font-weight:700}
.trust-details-collapsible{display:none}
.trust-details-pre{text-align:left;overflow-x:auto;max-width:100%;background:#181;color:#fff;border-radius:8px;padding:0.7em;font-size:0.95em;margin-top:0.5em;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;word-break:break-word}
.trust-info{margin-top:0.5em;font-size:0.95em;color:#bfb;background:#222;border-radius:6px;padding:0.5em}
.trust-info ul{margin:0.5em 0 0 1.2em}
.decoded-pre{background:#111;color:#0f0;padding:0.5em;border-radius:8px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word;overflow-wrap:anywhere;word-break:break-word;max-width:100%;}
.small-muted{color:#8f8}
.input-card{background:#111;border-radius:10px;padding:1em;min-width:220px}
.input-card{display:flex;flex-direction:column;gap:.5rem}
.inline-select{font-size:1.1em;padding:0.3em 1em;border-radius:8px;margin-left:0.5em}

/* Align small form rows (labels + inline controls) with card inputs */
.form-row{display:flex;align-items:center;gap:.75rem;margin-bottom:.6rem}
.form-row label{display:block;margin:0;flex:0 0 220px}
.form-row .inline-select{flex:0 0 140px;margin-left:0;padding:.55rem .6rem}
@media (max-width:640px){
  .form-row{flex-direction:column;align-items:stretch}
  .form-row label{flex:none}
  .form-row .inline-select{width:100%;flex:none}
}
.generate-btn{margin-top:1.5em}
.multi-grid{margin-top:1rem}
.result-warning{color:var(--danger);font-weight:bold;margin-top:1em}
.link-row{margin-top:2em}

/* Secondary compact navigation used at the bottom of forms/pages */
.link-row{display:flex;gap:.5rem;align-items:center;justify-content:center;color:var(--muted);font-weight:700;margin-top:1.8rem}
.link-row a{color:var(--muted);text-decoration:none;padding:.25rem .5rem;border-radius:8px;transition:background .12s ease,color .12s ease}
.link-row a:hover{background:rgba(0,255,102,0.04);color:var(--accent)}
.link-row a[aria-current="page"]{color:var(--accent);font-weight:900}
.link-row .sep{color:rgba(255,255,255,0.06);padding:0 .25rem}

@media (max-width:420px){
  .link-row{flex-wrap:wrap;gap:.4rem;padding:0 .6rem}
  .link-row .sep{display:none}
}

/* Google Safe Browsing badge */
.gsb-badge{display:inline-block;margin-left:.6rem;padding:.18rem .5rem;border-radius:8px;background:rgba(255,200,0,0.08);color:#ffd38a;font-weight:800;font-size:0.78rem;border:1px solid rgba(255,200,0,0.09)}
.gsb-badge.gsb-flagged{background:linear-gradient(180deg, rgba(255,50,50,0.12), rgba(255,50,50,0.06));color:var(--danger);border-color:rgba(255,50,50,0.12)}

/* App header and logo (not in navbar) */
.app-header{display:flex;align-items:center;gap:1rem;margin-bottom:0.6rem}
.app-logo{width:84px;height:auto;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,0.45);background:rgba(255,255,255,0.02);padding:6px}
.app-header h1{margin:0;font-size:1.6rem}

@media (max-width:900px){
  .app-logo{width:72px}
  .app-header h1{font-size:1.35rem}
}
@media (max-width:420px){
  .app-header{flex-direction:column;align-items:center;gap:.4rem}
  .app-logo{width:56px}
  .app-header h1{font-size:1.2rem;text-align:center}
}

/* Landing page hero */
.landing-hero{display:flex;gap:2rem;align-items:center;justify-content:center;padding:1.2rem 0}
.landing-logo{width:140px;height:auto;border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,0.45);background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:10px}
.hero-text h1{margin:0;font-size:2.1rem}
.tagline{color:var(--muted);margin-top:.4rem;margin-bottom:.6rem}
.hero-cta{display:flex;gap:.6rem}
.features{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-top:1.6rem}
.feature{background:var(--card-bg);padding:1rem;border-radius:12px;text-align:left}

@media (max-width:900px){
  .landing-hero{gap:1rem}
  .landing-logo{width:120px}
  .hero-text h1{font-size:1.6rem}
  .features{grid-template-columns:repeat(2,1fr)}
}
@media (max-width:640px){
  .landing-hero{flex-direction:column;padding:0.8rem 0}
  .landing-logo{width:96px}
  .features{grid-template-columns:1fr}
}

/* Custom file input */
.file-input{display:flex;align-items:center;gap:0.6rem}
.hidden-file{position:absolute;left:-9999px}
.file-btn{display:inline-block;padding:.55rem .9rem;border-radius:10px;background:rgba(255,255,255,0.03);color:var(--muted);cursor:pointer;border:1px solid rgba(255,255,255,0.03);font-weight:800}
.file-name{color:var(--muted);font-size:.95rem;max-width:60%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

.consent-slot{display:block;width:100%;margin-top:.6rem;text-align:center}


/* Slightly larger page wrapper spacing for comfortable layout */
.page-wrapper{display:flex;justify-content:center;align-items:flex-start;padding-top:clamp(12px,4vh,48px);padding-bottom:clamp(12px,3vh,40px)}

/* Retry button near status */
.status-row{display:flex;align-items:center;gap:.6rem;justify-content:center}



/* Final mobile fixes: prevent horizontal overflow and scale QR cards */
@media (max-width:420px){
  html,body{overflow-x:hidden}
  .container{margin:0.5rem;padding:0.9rem}
  .page-wrapper{padding-top:15px;padding-bottom:64px}
  .multi-grid{grid-template-columns:1fr}
  .qr-card{width:100%;max-width:100%;padding:0.75rem}
  .qr-card img{max-width:160px;max-height:160px;width:100%;height:auto;object-fit:contain}
  .file-name{max-width:48%}
  .qr-decoded pre,.trust-details-pre,.decoded-pre{white-space:normal;word-break:break-word;overflow-wrap:break-word}
  .scan-frame{width:92%;height:38vw;max-height:320px}
  .scan-line,.scan-bar{left:6%;right:6%}
  .qr-controls{gap:.4rem}
  /* Make input cards collapse properly on narrow screens */
  .input-card{min-width:0;padding:0.7rem}
  .input-card input[type=text]{font-size:0.95rem}
  /* Stack controls inside QR cards */
  .qr-controls{flex-direction:column;align-items:stretch}
  .qr-controls .btn{width:100%}
  /* Ensure navbar wraps cleanly */
  .navbar{flex-wrap:wrap;padding:.5rem}
  .navbar a{font-size:0.92rem;padding:.45rem .6rem}
}

